(this["webpackJsonpwebsite-3"]=this["webpackJsonpwebsite-3"]||[]).push([[0],{279:function(e,t,n){},281:function(e,t,n){},286:function(e,t){},287:function(e,t){},295:function(e,t){},298:function(e,t){},299:function(e,t){},300:function(e,t){},305:function(e,t,n){"use strict";n.r(t);var i=n(19),a=n.n(i),r=n(246),s=n.n(r),o=(n(279),n(4)),c=n.n(o),l=n(11),u=n(6),d=n(10),h=n(50),b=n(13),p=n(14),m=(n(281),n(307)),j=n(311),f=n(308),g=n(310),O=n(309),y=n(270),x=n(272),v=n(271),C=n(206),w=["Atelectasis","COVID-19","Cardiomegaly","Consolidation","Edema","Effusion","Emphysema","Infiltration","Mass","Nodule","Pleural Thickening","Pneumothorax"],k=function(){function e(){Object(u.a)(this,e),this.MODEL_CLASSES=["Atelectasis","COVID-19","Cardiomegaly","Consolidation","Edema","Effusion","Emphysema","Infiltration","Mass","Nodule","Pleural Thickening","Pneumothorax"],this.model=null}return Object(d.a)(e,[{key:"init",value:function(){var e=Object(l.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.b("https://pneumonia-model.nyc3.digitaloceanspaces.com/model.json");case 2:this.model=e.sent,console.log("Model loaded.");case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"predict",value:function(){var e=Object(l.a)(c.a.mark((function e(t){var n,i,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=C.a.fromPixels(t).resizeNearestNeighbor([224,224]).mean(2).toFloat().expandDims(-1).reshape([1,224,224,1]),e.next=3,this.model.predict(n).data();case 3:return i=e.sent,a=this.getClassNames(i),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getClassNames",value:function(e){return Array.from(e).map((function(e,t){return{name:w[t],probability:100*e,toLabel:w[t]+": "+100*e+"%"}})).sort((function(e,t){return t.probability-e.probability})).slice(0,3)}}]),e}(),I=n(207),L=n(273),E=n(21),P=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(e){var i;return Object(u.a)(this,n),(i=t.call(this,e)).state={predictions:e.predictions},i}return Object(d.a)(n,[{key:"buildList",value:function(e){var t=this;return e.map((function(e){return t.buildItem(e)}))}},{key:"buildItem",value:function(e){return e.probability<.1&&e.probability>0&&(e.probability=.1),Object(E.jsxs)(I.a.Item,{children:[e.name," - Probabilidade: ",Math.round(100*(e.probability+Number.EPSILON))/100," %",Object(E.jsx)(L.a,{striped:!0,variant:"success",now:e.probability})]},e.name)}},{key:"render",value:function(){return Object(E.jsx)(I.a,{children:this.buildList(this.state.predictions)})}}]),n}(a.a.Component),S=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(e){var i;return Object(u.a)(this,n),(i=t.call(this,e)).modelClassifier=new k,i.state={isModelLoaded:!1,imageSrc:"",showImagePreview:!1,predictions:[]},i.onFileChange=i.onFileChange.bind(Object(h.a)(i)),i.predict=i.predict.bind(Object(h.a)(i)),i}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.modelClassifier.init(),this.setState({isModelLoaded:!0})}},{key:"onFileChange",value:function(e){var t=this,n=e.target.files[0],i=new FileReader,a=i.readAsDataURL(n);i.onloadend=function(e){a=e.target.result,t.setState({imageSrc:a,showImagePreview:!0})}}},{key:"predict",value:function(){var e=Object(l.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.getElementById("img-preview"),e.next=3,this.modelClassifier.predict(t);case 3:n=e.sent,this.setState({predictions:n});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(E.jsxs)(m.a,{style:{marginTop:"20px"},children:[!this.state.isModelLoaded&&Object(E.jsx)(j.a,{style:{marginTop:"20px",marginBottom:"20px"},children:Object(E.jsxs)(j.a.Body,{style:{display:"inline-flex",alignItems:"center"},children:[Object(E.jsx)(f.a,{animation:"border"}),Object(E.jsx)("span",{style:{marginLeft:"10px"},children:"Carregando o sistema..."})]})}),Object(E.jsxs)(j.a,{children:[Object(E.jsx)(j.a.Header,{children:Object(E.jsx)("strong",{children:"Analisador de Raio-X"})}),Object(E.jsxs)(j.a.Body,{children:[Object(E.jsxs)(g.a.Group,{controlId:"formFile",className:"mb-3",children:[Object(E.jsx)(g.a.Label,{children:"Escolha uma imagem de Raio-X."}),Object(E.jsx)(g.a.Control,{type:"file",onChange:this.onFileChange})]}),Object(E.jsx)(v.a,{variant:"primary",type:"submit",style:{marginBottom:"20px"},onClick:this.predict,children:" Diagnosticar "}),this.state.showImagePreview&&Object(E.jsxs)(O.a,{children:[Object(E.jsx)(y.a,{children:Object(E.jsx)(x.a,{id:"img-preview",src:this.state.imageSrc,rounded:!0,width:"300",height:"300"})}),Object(E.jsx)(y.a,{children:this.state.predictions.length>0&&Object(E.jsx)(P,{predictions:this.state.predictions})})]})]})]})]})}}]),n}(a.a.Component),F=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,312)).then((function(t){var n=t.getCLS,i=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),i(e),a(e),r(e),s(e)}))};n(304);s.a.render(Object(E.jsx)(a.a.StrictMode,{children:Object(E.jsx)(S,{})}),document.getElementById("root")),F()}},[[305,1,2]]]);
//# sourceMappingURL=main.882f5f76.chunk.js.map